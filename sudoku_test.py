#Wei Dai, Qing Xie
#Test File for CIT591 Assignment 4: Sudoku

from sudoku import *
import unittest

class testSudoku(unittest.TestCase):
      
      def setUp(self):
            self.ints=[[0,6,0],
                       [3,0,8],
                       [2,0,1]]
            
            self.sets=[[{1,2,3,4,5,6,7,8,9},{6},{1,2,3,4,5,6,7,8,9}],
                       [{3},{1,2,3,4,5,6,7,8,9},{8}],
                       [{2},{1,2,3,4,5,6,7,8,9},{1}]]
            
            self.solvedProblem=[[{1},{6},{4}],
                               [{3},{5},{8}],
                               [{2},{7},{9}]]
            
            self.solvedSets=[[{3}, {1}, {6}, {8}, {4}, {9}, {5}, {7}, {2}],
                             [{9}, {2}, {5}, {7}, {3}, {1}, {8}, {4}, {6}],
                             [{8}, {7}, {4}, {5}, {2}, {6}, {9}, {1}, {3}],
                             [{7}, {6}, {9}, {4}, {8}, {3}, {2}, {5}, {1}],
                             [{5}, {3}, {2}, {6}, {1}, {7}, {4}, {8}, {9}],
                             [{4}, {8}, {1}, {9}, {5}, {2}, {3}, {6}, {7}],
                             [{6}, {4}, {3}, {2}, {7}, {8}, {1}, {9}, {5}],
                             [{1}, {9}, {8}, {3}, {6}, {5}, {7}, {2}, {4}],
                             [{2}, {5}, {7}, {1}, {9}, {4}, {6}, {3}, {8}]]
            
            self.ints2=[  [ 0, 0, 4,   0, 0, 0,   0, 6, 7 ],
                          [ 3, 0, 0,   4, 7, 0,   0, 0, 5 ],
                          [ 1, 5, 0,   8, 2, 0,   0, 0, 3 ],

                          [ 0, 0, 6,   0, 0, 0,   0, 3, 1 ],
                          [ 8, 0, 2,   1, 0, 5,   6, 0, 4 ],
                          [ 4, 1, 0,   0, 0, 0,   9, 0, 0 ],
                                    
                          [ 7, 0, 0,   0, 8, 0,   0, 4, 6 ],
                          [ 6, 0, 0,   0, 1, 2,   0, 0, 0 ],
                          [ 9, 3, 0,   0, 0, 0,   7, 1, 0 ] ]
            
            self.sets2=[[{1, 2, 3, 4, 5, 6, 7, 8, 9},{1, 2, 3, 4, 5, 6, 7, 8, 9},{4},{1, 2, 3, 4, 5, 6, 7, 8, 9},{1, 2, 3, 4, 5, 6, 7, 8, 9},{1, 2, 3, 4, 5, 6, 7, 8, 9},{1, 2, 3, 4, 5, 6, 7, 8, 9},{6},{7}],
                        [{3}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {4}, {7}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {5}],
                        [{1}, {5}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {8}, {2}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {3}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {6}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {3}, {1}],
                        [{8}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {2}, {1}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {5}, {6}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {4}],
                        [{4}, {1}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{7}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {8}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {4}, {6}],
                        [{6}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}, {2}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{9}, {3}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {7}, {1}, {1, 2, 3, 4, 5, 6, 7, 8, 9}]]

            self.ints3=[  [ 0, 8, 0,   0, 0, 0,   2, 0, 5 ],
                          [ 7, 0, 1,   4, 0, 0,   0, 8, 9 ],
                          [ 9, 0, 0,   3, 5, 0,   0, 1, 0 ],
                                  
                          [ 0, 0, 9,   0, 0, 7,   6, 3, 0 ],
                          [ 0, 0, 2,   0, 0, 9,   7, 0, 0 ],
                          [ 0, 7, 8,   5, 0, 0,   0, 0, 0 ],
                                  
                          [ 0, 6, 0,   0, 4, 5,   0, 0, 3 ],
                          [ 2, 9, 0,   0, 0, 6,   5, 0, 1 ],
                          [ 4, 0, 5,   0, 0, 0,   8, 7, 0 ] ]
            
            self.sets3=[[{1, 2, 3, 4, 5, 6, 7, 8, 9}, {8}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {2}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {5}],
                        [{7}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}, {4}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {8}, {9}],
                        [{9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {3}, {5}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {7}, {6}, {3}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {2}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {9}, {7}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {7}, {8}, {5}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {6}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {4}, {5}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {3}],
                        [{2}, {9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {6}, {5}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}],
                        [{4}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {5}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {8}, {7}, {1, 2, 3, 4, 5, 6, 7, 8, 9}]]

            self.ints4= [ [ 0, 1, 6,   0, 0, 9,   0, 0, 2 ],
                          [ 0, 0, 0,   0, 3, 1,   0, 4, 0 ],
                          [ 8, 7, 0,   5, 2, 0,   0, 1, 0 ],
                          
                          [ 0, 0, 9,   0, 8, 0,   2, 0, 1 ],
                          [ 5, 0, 0,   6, 0, 7,   0, 0, 9 ],
                          [ 4, 0, 1,   0, 5, 0,   3, 0, 0 ],
                          
                          [ 0, 4, 0,   0, 7, 8,   0, 9, 5 ],
                          [ 0, 9, 0,   3, 6, 0,   0, 0, 0 ],
                          [ 2, 0, 0,   1, 0, 0,   6, 3, 0 ] ]
            
            self.sets4=[[{1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}, {6}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {2}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {3}, {1}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {4}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{8}, {7}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {5}, {2}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {8}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {2}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}],
                        [{5}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {6}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {7}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {9}],
                        [{4}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {5}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {3}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {4}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {7}, {8}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {9}, {5}],
                        [{1, 2, 3, 4, 5, 6, 7, 8, 9}, {9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {3}, {6}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}],
                        [{2}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {1, 2, 3, 4, 5, 6, 7, 8, 9}, {6}, {3}, {1, 2, 3, 4, 5, 6, 7, 8, 9}]]
            
            self.sets5= [[{3}, {1}, {6}, {7, 8}, {4}, {9}, {5, 7, 8}, {5, 7}, {2}],
                         [{9}, {2, 5}, {2, 5}, {7, 8}, {3}, {1}, {5, 7, 8}, {4}, {6, 7, 8}],
                         [{8}, {7}, {4}, {5}, {2}, {6}, {9}, {1}, {3}],
                         [{6, 7}, {6}, {9}, {4}, {8}, {3}, {2}, {5, 6, 7}, {1}],
                         [{5}, {2, 3}, {2}, {6}, {1}, {7}, {4}, {8}, {9}],
                         [{4}, {6, 8}, {1}, {9}, {5}, {2}, {3}, {6, 7}, {6, 7}],
                         [{6}, {4}, {3}, {2}, {7}, {8}, {1}, {9}, {5}],
                         [{1, 7}, {9}, {5, 7, 8}, {3}, {6}, {4, 5}, {4, 7, 8}, {2, 7}, {4, 7, 8}],
                         [{2}, {5, 8}, {5, 7, 8}, {1}, {9}, {4, 5}, {6}, {3}, {4, 7, 8}]]

            self.unsolvableSets=[ [ 9, 0, 0,   0, 0, 8,   0, 0, 0 ],
                                [ 0, 0, 0,   0, 3, 2,   0, 0, 0 ],
                                [ 6, 8, 0,   9, 0, 1,   0, 7, 0 ],
                                [ 8, 0, 9,   5, 2, 0,   0, 3, 0 ],
                                [ 2, 0, 0,   0, 0, 0,   0, 0, 5 ],
                                [ 0, 4, 0,   0, 9, 3,   7, 0, 8 ],
                                [ 0, 2, 0,   3, 0, 9,   0, 6, 4 ],
                                [ 0, 0, 0,   2, 8, 0,   0, 0, 0 ],
                                [ 0, 0, 0,   6, 0, 0,   0, 0, 3 ] ]
            
      def testConvertToSets(self):
            self.assertEqual(self.sets,convertToSets(self.ints))
            self.assertEqual(self.sets2,convertToSets(self.ints2))
            
      def testConverToInts(self):
            self.assertEqual(self.ints,convertToInts(self.sets))
            self.assertEqual(self.ints2,convertToInts(self.sets2))
  
      def testGetRowLocations(self):
            rowNumber = 1
            expected = [(1,0),(1,1),(1,2),(1,3),(1,4),(1,5),(1,6),(1,7),(1,8)]
            result = getRowLocations(rowNumber)
            self.assertEqual(expected, result)
            rowNumber = 4
            expected = [(4,0),(4,1),(4,2),(4,3),(4,4),(4,5),(4,6),(4,7),(4,8)]
            result = getRowLocations(rowNumber)
            self.assertEqual(expected, result)
        
        
      def testGetColumnLocations(self):
            columnNumber = 1
            expected = [(0,1),(1,1),(2,1),(3,1),(4,1),(5,1),(6,1),(7,1),(8,1)]
            result = getColumnLocations(columnNumber)
            self.assertEqual(expected, result)
            columnNumber = 5
            expected = [(0,5),(1,5),(2,5),(3,5),(4,5),(5,5),(6,5),(7,5),(8,5)]
            result = getColumnLocations(columnNumber)
            self.assertEqual(expected, result)
            
            
      def testGetBoxLocations(self):
            expected = [(0,3),(0,4),(0,5),(1,3),(1,4),(1,5),(2,3),(2,4),(2,5)]
            self.assertEqual(expected,getBoxLocations((1,4)))
            expected = [(3,3),(3,4),(3,5),(4,3),(4,4),(4,5),(5,3),(5,4),(5,5)]
            self.assertEqual(expected,getBoxLocations((4,4)))
            
            
      def testEliminate(self):
            problem=self.sets5
            location=(3,1)
            listOfLocations=[(3,0),(3,1),(3,3),(3,4),(3,5),(3,6),(3,7),(3,8)]
            self.assertEqual(2,eliminate(problem,location,listOfLocations))
            listOfLocations=[(1,2)]
            self.assertEqual(0,eliminate(problem,location,listOfLocations))
            location=(0,1)
            problem=self.sets4
            listOfLocations=[(0,0),(0,1),(0,2),(0,3),(0,4),(0,5),(0,6),(0,7),(0,8)]
            self.assertEqual(5,eliminate(problem,location,listOfLocations))

      def testIsSolved(self):
            self.assertEqual(True,isSolved(self.solvedProblem))
            self.assertEqual(False,isSolved(self.sets))
            self.assertEqual(True,isSolved(self.solvedSets))
            
      def testSolve(self):
            sets2=convertToSets(self.ints2)
            unsolvableSets=convertToSets(self.unsolvableSets)
            self.assertEqual(True,solve(self.sets5))
            print(self.sets5)
            self.assertEqual(True,solve(sets2))
            self.assertEqual(False,solve(unsolvableSets))
            
         
            
unittest.main()
